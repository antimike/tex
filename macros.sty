
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{macros}[2020/06/15 Macros and convenient abbreviations used in physics PSETs.]

\RequirePackage{xparse}
\RequirePackage{substr}

%% Referencing and layout macros
\newcommand{\eqnref}[1]{(\ref{#1})}
\newcommand{\eqnremark}[1]{\textnormal{(#1)}}
\newcommand{\nn}{\nonumber \\}

%% Spacing / text style macros
\newcommand{\tallphantom}{\vphantom{\left( \int \dfrac{p_i^2}{2m} \right)}}
\newcommand{\tx}[1]{\textnormal{#1}}
\newcommand{\lqq}[1]{\quad \textnormal{#1}}
\newcommand{\byeqnqq}[1]{\qquad \tx{(by } \eqnref{#1} \tx{)}}
\newcommand{\byeqn}[1]{\tx{(by } \eqnref{#1} \tx{)}}
\newcommand{\spacedimplies}{\Longrightarrow \quad}
\newcommand{\ds}{\displaystyle}
\newcommand{\eff}{\mathcal{f}}

%% "Struts" (for inserting vertical spaces in tables)
\newcommand\tstrut{\rule{0pt}{2.6ex}}       % Top strut
\newcommand\bstrut{\rule[-1.2ex]{0pt}{0pt}} % Bottom strut

%% Physics macros
\newcommand{\cvec}[1]{\begin{pmatrix}#1\end{pmatrix}}
\newcommand{\dprime}{\prime \prime}
\newcommand{\til}[1]{\widetilde{#1}}

\NewDocumentCommand{\sagefig}{ m v }{
  \sageplot{#1, #2}
}

\makeatletter
\def\@boldifybetter$#1$#2@{\boldify#1@\boldifynotdollars#2@}
\def\@boldifydollars$#1$@{$\bm{#1}$}
\def\@boldifynotdollars#1@{\ifmmode\bm{#1}\else\textbf{#1}\fi}
\def\@boldify{\@ifnextchar${\@boldifydollars}{\@boldifynotdollars}}
\def\boldificate{\@ifnextchar${\@boldifybetter}{\@boldifynotdollars}}
\newcommand*{\B}[1]{\ifmmode\bm{#1}\else\textbf{#1}\fi}
\newcommand*{\boldify}[1]{\@boldify#1@}
\newcommand*{\boldifybetter}[1]{\@boldificate#1@}

\makeatother
